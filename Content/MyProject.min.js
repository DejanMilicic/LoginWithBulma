function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF;a=window;b=a.MyProject=a.MyProject||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.UI=d.UI||{};f=e.Var=e.Var||{};g=d.Operators=d.Operators||{};h=d.Unchecked=d.Unchecked||{};i=a.System=a.System||{};j=i.Guid=i.Guid||{};k=d.Obj=d.Obj||{};l=d.List=d.List||{};m=l.T=l.T||{};n=e.AttrModule=e.AttrModule||{};o=e.View=e.View||{};p=d.Arrays=d.Arrays||{};q=e.Templating=e.Templating||{};r=q.Runtime=q.Runtime||{};s=r.Server=r.Server||{};t=s.TemplateInstance=s.TemplateInstance||{};u=d.JavaScript=d.JavaScript||{};v=u.JSModule=u.JSModule||{};w=d.Utils=d.Utils||{};x=s.Handler=s.Handler||{};y=s.Runtime=s.Runtime||{};z=e.ConcreteVar=e.ConcreteVar||{};A=e.Snap=e.Snap||{};B=u.Pervasives=u.Pervasives||{};C=e.Attrs=e.Attrs||{};D=e.DomUtility=e.DomUtility||{};E=d.Strings=d.Strings||{};F=d.Collections=d.Collections||{};G=F.Dictionary=F.Dictionary||{};H=F.HashSet=F.HashSet||{};I=r.Client=r.Client||{};J=d.Seq=d.Seq||{};K=e.Abbrev=e.Abbrev||{};L=K.Fresh=K.Fresh||{};M=e.AttrProxy=e.AttrProxy||{};N=e.DynamicAttrNode=e.DynamicAttrNode||{};O=e.Doc=e.Doc||{};P=F.DictionaryUtil=F.DictionaryUtil||{};Q=d.Enumerator=d.Enumerator||{};R=a.Object;S=Q.T=Q.T||{};T=d.Numeric=d.Numeric||{};U=a.EventTarget;V=a.Node;W=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};X=e.DocElemNode=e.DocElemNode||{};Y=a.CharacterData;Z=d.Slice=d.Slice||{};_0=e.Docs=e.Docs||{};_1=e.Elt=e.Elt||{};_2=K.Mailbox=K.Mailbox||{};_3=F.HashSetUtil=F.HashSetUtil||{};_4=d.Queue=d.Queue||{};_5=e.Client=e.Client||{};_6=_5.Attrs=_5.Attrs||{};_7=_6.Dyn=_6.Dyn||{};_8=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};_9=e.CheckedInput=e.CheckedInput||{};_=e.Array=e.Array||{};$=e.Updates=e.Updates||{};ba=_5.Docs=_5.Docs||{};bb=ba.RunState=ba.RunState||{};bc=ba.NodeSet=ba.NodeSet||{};bd=e.An=e.An||{};be=e.String=e.String||{};bf=d.Concurrency=d.Concurrency||{};bg=e.Anims=e.Anims||{};bh=e.AppendList=e.AppendList||{};bi=_5.Settings=_5.Settings||{};bj=d.Char=d.Char||{};bk=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bl=bf.AsyncBody=bf.AsyncBody||{};bm=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bn=bf.CT=bf.CT||{};bo=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bp=K.HashSet=K.HashSet||{};bq=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};br=bf.Scheduler=bf.Scheduler||{};bs=d.CancellationTokenSource=d.CancellationTokenSource||{};bt=e.Easing=e.Easing||{};bu=d.OperationCanceledException=d.OperationCanceledException||{};bv=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bw=d.Lazy=d.Lazy||{};bx=ba.DomNodes=ba.DomNodes||{};by=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bz=by.LazyRecord=by.LazyRecord||{};bA=a.Math;bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.console;bE=a.jQuery;bF=a.Date;c.Main=function(){var bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ;function bR(bS){bG.Set(!E.IsNullOrWhiteSpace(bS.Vars.Hole("password").Get()));bH.Set(!E.IsNullOrWhiteSpace(bS.Vars.Hole("email").Get()));bG.Get()&&bH.Get()?a.alert((function(bT){return function(bU){return bT("Your email is "+w.toSafe(bU));};}(a.id))(bS.Vars.Hole("email").Get())):void 0;bS.Event.preventDefault();}bG=f.Create$1(true);bH=f.Create$1(true);bI=(bJ=(bK=(bL=(bM=(bN=j.NewGuid(),a.String(bN)),(bO=new m({$:1,$0:{$:3,$0:"attremail",$1:n.DynamicClassPred("is-danger",o.Map(function(bS){return!bS;},bH.get_View()))},$1:m.Empty}),[[null],bM,new m({$:1,$0:{$:3,$0:"attremailmessage",$1:n.DynamicClassPred("hidden",bH.get_View())},$1:bO})])),[bL[0],bL[1],new m({$:1,$0:{$:3,$0:"attrpassword",$1:n.DynamicClassPred("is-danger",o.Map(function(bS){return!bS;},bG.get_View()))},$1:bL[2]})]),[bK[0],bK[1],new m({$:1,$0:{$:3,$0:"attrpasswordmessage",$1:n.DynamicClassPred("hidden",bG.get_View())},$1:bK[2]})]),[bJ[0],bJ[1],new m({$:1,$0:(bP=bJ[0],{$:5,$0:"login",$1:true,$2:function(bS){return function(bT){return bR({Vars:bP[0],Target:bS,Event:bT});};}}),$1:bJ[2]})]);bQ=x.CompleteHoles(bI[1],bI[2],[["email",0],["password",0],["rememberme",2]]);bI[0][0]=new t.New(bQ[1],y.RunTemplate(bQ[0]));};f.Create$1=function(bG){return new z.New(false,A.New({$:2,$0:bG,$1:[]}),bG);};g.FailWith=function(bG){throw a.Error(bG);};g.KeyValue=function(bG){return[bG.K,bG.V];};h.Equals=function(bG,bH){var bI,bJ,bK,bL;if(bG===bH)return true;else{bI=typeof bG;if(bI=="object"){if(bG===null||bG===void 0||bH===null||bH===void 0)return false;else if("Equals"in bG)return bG.Equals(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)return h.arrayEquals(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)return h.dateEquals(bG,bH);else{bJ=[true];for(var bM in bG)if(function(bN){bJ[0]=!bG.hasOwnProperty(bN)||bH.hasOwnProperty(bN)&&h.Equals(bG[bN],bH[bN]);return!bJ[0];}(bM))break;if(bJ[0]){for(var bN in bH)if(function(bO){bJ[0]=!bH.hasOwnProperty(bO)||bG.hasOwnProperty(bO);return!bJ[0];}(bN))break;}return bJ[0];}}else return bI=="function"&&("$Func"in bG?bG.$Func===bH.$Func&&bG.$Target===bH.$Target:"$Invokes"in bG&&"$Invokes"in bH&&h.arrayEquals(bG.$Invokes,bH.$Invokes));}};h.Hash=function(bG){var bH;bH=typeof bG;return bH=="function"?0:bH=="boolean"?bG?1:0:bH=="number"?bG:bH=="string"?h.hashString(bG):bH=="object"?bG==null?0:bG instanceof a.Array?h.hashArray(bG):h.hashObject(bG):0;};h.arrayEquals=function(bG,bH){var bI,bJ;if(p.length(bG)===p.length(bH)){bI=true;bJ=0;while(bI&&bJ<p.length(bG)){!h.Equals(p.get(bG,bJ),p.get(bH,bJ))?bI=false:void 0;bJ=bJ+1;}return bI;}else return false;};h.dateEquals=function(bG,bH){return bG.getTime()===bH.getTime();};h.hashString=function(bG){var bH,bI,bJ;if(bG===null)return 0;else{bH=5381;for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH=h.hashMix(bH,bG[bI].charCodeAt());return bH;}};h.hashArray=function(bG){var bH,bI,bJ;bH=-34948909;for(bI=0,bJ=p.length(bG)-1;bI<=bJ;bI++)bH=h.hashMix(bH,h.Hash(p.get(bG,bI)));return bH;};h.hashObject=function(bG){var bH,bI;if("GetHashCode"in bG)return bG.GetHashCode();else{bH=[0];for(var bJ in bG)if(function(bK){bH[0]=h.hashMix(h.hashMix(bH[0],h.hashString(bK)),h.Hash(bG[bK]));return false;}(bJ))break;return bH[0];}};h.hashMix=function(bG,bH){return(bG<<5)+bG+bH;};h.Compare=function(bG,bH){var bI,bJ,bK,bL,bM,bN;if(bG===bH)return 0;else{bJ=typeof bG;switch(bJ=="function"?1:bJ=="boolean"?2:bJ=="number"?2:bJ=="string"?2:bJ=="object"?3:0){case 0:return typeof bH=="undefined"?0:-1;break;case 1:return g.FailWith("Cannot compare function values.");break;case 2:return bG<bH?-1:1;break;case 3:if(bG===null)bK=-1;else if(bH===null)bK=1;else if("CompareTo"in bG)bK=bG.CompareTo(bH);else if("CompareTo0"in bG)bK=bG.CompareTo0(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)bK=h.compareArrays(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)bK=h.compareDates(bG,bH);else{bL=[0];for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bH.hasOwnProperty(bP)?(bL[0]=1,true):(bL[0]=h.Compare(bG[bP],bH[bP]),bL[0]!==0);}(bO))break;if(bL[0]===0){for(var bP in bH)if(function(bQ){return!bH.hasOwnProperty(bQ)?false:!bG.hasOwnProperty(bQ)&&(bL[0]=-1,true);}(bP))break;}bK=bL[0];}return bK;break;}}};h.compareArrays=function(bG,bH){var bI,bJ;if(p.length(bG)<p.length(bH))return -1;else if(p.length(bG)>p.length(bH))return 1;else{bI=0;bJ=0;while(bI===0&&bJ<p.length(bG)){bI=h.Compare(p.get(bG,bJ),p.get(bH,bJ));bJ=bJ+1;}return bI;}};h.compareDates=function(bG,bH){return h.Compare(bG.getTime(),bH.getTime());};j.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bG){var bH,bI;bH=bA.random()*16|0;bI=bG=="x"?bH:bH&3|8;return bI.toString(16);});};k=d.Obj=bC.Class({Equals:function(bG){return this===bG;},GetHashCode:function(){return -1;}},null,k);m=l.T=bC.Class({GetEnumerator:function(){return new S.New(this,null,function(bG){var bH;bH=bG.s;return bH.$==0?false:(bG.c=bH.$0,bG.s=bH.$1,true);},void 0);},GetEnumerator0:function(){return Q.Get(this);}},null,m);m.Empty=new m({$:0});n.ClassPred=function(bG,bH){return C.Static(function(bI){if(bH)D.AddClass(bI,bG);else D.RemoveClass(bI,bG);});};n.DynamicClassPred=function(bG,bH){return C.Dynamic(bH,function(bI){return function(bJ){return bJ?D.AddClass(bI,bG):D.RemoveClass(bI,bG);};});};n.Handler=function(bG,bH){return C.Static(function(bI){bI.addEventListener(bG,function(bJ){return(bH(bI))(bJ);},false);});};n.OnAfterRender=function(bG){return new M({$:4,$0:bG});};n.Value=function(bG){function bH(bI){return{$:1,$0:bI};}return n.CustomValue(bG,a.id,function(bI){return bH(a.id(bI));});};n.Checked=function(bG){function bH(bI,bJ){return!h.Equals(bG.Get(),bI.checked)?bG.Set(bI.checked):null;}return M.Concat([n.DynamicProp("checked",bG.get_View()),n.Handler("change",function(bI){return function(bJ){return bH(bI,bJ);};}),n.Handler("click",function(bI){return function(bJ){return bH(bI,bJ);};})]);};n.IntValue=function(bG){return n.CustomVar(bG,function(bH,bI){var bJ;bJ=bI.get_Input();return bH.value!==bJ?void(bH.value=bJ):null;},function(bH){var bI,bJ,bK;bI=bH.value;return{$:1,$0:be.isBlank(bI)?(bH.checkValidity?bH.checkValidity():true)?new _9({$:2,$0:bI}):new _9({$:1,$0:bI}):(bJ=(bK=0,[T.TryParseInt32(bI,{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]),bJ[0]?new _9({$:0,$0:bJ[1],$1:bI}):new _9({$:1,$0:bI}))};});};n.IntValueUnchecked=function(bG){return n.CustomValue(bG,a.String,function(bH){var bI;return be.isBlank(bH)?{$:1,$0:0}:(bI=+bH,bI!==bI>>0?null:{$:1,$0:bI});});};n.FloatValue=function(bG){return n.CustomVar(bG,function(bH,bI){var bJ;bJ=bI.get_Input();return bH.value!==bJ?void(bH.value=bJ):null;},function(bH){var bI,bJ;bI=bH.value;return{$:1,$0:be.isBlank(bI)?(bH.checkValidity?bH.checkValidity():true)?new _9({$:2,$0:bI}):new _9({$:1,$0:bI}):(bJ=+bI,a.isNaN(bJ)?new _9({$:1,$0:bI}):new _9({$:0,$0:bJ,$1:bI}))};});};n.FloatValueUnchecked=function(bG){return n.CustomValue(bG,a.String,function(bH){var bI;return be.isBlank(bH)?{$:1,$0:0}:(bI=+bH,a.isNaN(bI)?null:{$:1,$0:bI});});};n.Dynamic=function(bG,bH){return C.Dynamic(bH,function(bI){return function(bJ){return D.SetAttr(bI,bG,bJ);};});};n.CustomValue=function(bG,bH,bI){return n.CustomVar(bG,function(bJ,bK){bJ.value=bH(bK);},function(bJ){return bI(bJ.value);});};n.DynamicProp=function(bG,bH){return C.Dynamic(bH,function(bI){return function(bJ){bI[bG]=bJ;};});};n.CustomVar=function(bG,bH,bI){function bJ(bL,bM){return bG.UpdateMaybe(function(bN){var bO,bP;bO=bI(bL);return bO!=null&&bO.$==1&&(!h.Equals(bO.$0,bN)&&(bP=[bO,bO.$0],true))?bP[0]:null;});}function bK(bL,bM){var bN,bO;bN=bI(bL);return bN!=null&&bN.$==1&&(h.Equals(bN.$0,bM)&&(bO=bN.$0,true))?null:bH(bL,bM);}return M.Concat([n.Handler("change",function(bL){return function(bM){return bJ(bL,bM);};}),n.Handler("input",function(bL){return function(bM){return bJ(bL,bM);};}),n.Handler("keypress",function(bL){return function(bM){return bJ(bL,bM);};}),n.DynamicCustom(function(bL){return function(bM){return bK(bL,bM);};},bG.get_View())]);};n.DynamicCustom=function(bG,bH){return C.Dynamic(bH,bG);};o.Map=function(bG,bH){return o.CreateLazy(function(){return A.Map(bG,bH());});};o.CreateLazy=function(bG){var bH;bH={c:null,o:bG};return function(){var bI,bJ;bI=bH.c;return bI===null?(bI=bH.o(),bH.c=bI,(bJ=bI.s,bJ!=null&&bJ.$==0)?bH.o=null:A.WhenObsoleteRun(bI,function(){bH.c=null;}),bI):bI;};};o.Sink=function(bG,bH){function bI(){A.WhenRun(bH(),bG,function(){bf.scheduler().Fork(bI);});}bf.scheduler().Fork(bI);};o.Map3=function(bG,bH,bI,bJ){return o.CreateLazy(function(){return A.Map3(bG,bH(),bI(),bJ());});};o.Sequence=function(bG){return o.CreateLazy(function(){return A.Sequence(J.map(function(bH){return bH();},bG));});};o.Map2=function(bG,bH,bI){return o.CreateLazy(function(){return A.Map2(bG,bH(),bI());});};o.Const=function(bG){var bH;bH=A.New({$:0,$0:bG});return function(){return bH;};};o.Map2Unit=function(bG,bH){return o.CreateLazy(function(){return A.Map2Unit(bG(),bH());});};f=e.Var=bC.Class({},k,f);f.New=bC.Ctor(function(){},f);p.get=function(bG,bH){p.checkBounds(bG,bH);return bG[bH];};p.length=function(bG){return bG.dims===2?bG.length*bG.length:bG.length;};p.checkBounds=function(bG,bH){if(bH<0||bH>=bG.length)g.FailWith("Index was outside the bounds of the array.");};p.set=function(bG,bH,bI){p.checkBounds(bG,bH);bG[bH]=bI;};t=s.TemplateInstance=bC.Class({Hole:function(bG){return this.allVars.get_Item(bG);}},k,t);t.New=bC.Ctor(function(bG,bH){this.doc=bH;this.allVars=bG.$==0?bG.$0:g.FailWith("Should not happen");},t);v.GetFieldValues=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push(bG[bJ]);return bH;};w.toSafe=function(bG){return bG==null?"":bG;};x.CompleteHoles=function(bG,bH,bI){var bK,bL,bM,bN,bO,bP;function bJ(bQ,bR){var bS,bT,bU,bV;return bL.Contains(bQ)?null:(bS=bR===0?(bT=f.Create$1(""),[{$:7,$0:bQ,$1:bT},bT]):bR===1?(bU=f.Create$1(0),[{$:12,$0:bQ,$1:bU},bU]):bR===2?(bV=f.Create$1(false),[{$:8,$0:bQ,$1:bV},bV]):g.FailWith("Invalid value type"),(bK.set_Item(bQ,bS[1]),{$:1,$0:bS[0]}));}bK=new G.New$5();bL=new H.New$3();bM=Q.Get(bH);try{while(bM.MoveNext()){bN=bM.Current();(bN.$==7?(bO=[bN.$0,I.Box(bN.$1)],true):bN.$==10?(bO=[bN.$0,I.Box(bN.$1)],true):bN.$==9?(bO=[bN.$0,I.Box(bN.$1)],true):bN.$==12?(bO=[bN.$0,I.Box(bN.$1)],true):bN.$==11?(bO=[bN.$0,I.Box(bN.$1)],true):bN.$==8&&(bO=[bN.$0,I.Box(bN.$1)],true))?(bP=bO[0],bL.Add(bP),bK.set_Item(bP,bO[1])):void 0;}}finally{if("Dispose"in bM)bM.Dispose();}return[J.append(bH,p.choose(function(bQ){return bJ(bQ[0],bQ[1]);},bI)),{$:0,$0:bK}];};y.RunTemplate=function(bG){return O.RunFullDocTemplate(bG);};z=e.ConcreteVar=bC.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bG){if(this.isConst)(function(bH){return bH("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bH){bD.log(bH);}));else{A.Obsolete(this.snap);this.current=bG;this.snap=A.New({$:2,$0:bG,$1:[]});}},UpdateMaybe:function(bG){var bH;bH=bG(this.Get());bH!=null&&bH.$==1?this.Set(bH.$0):void 0;}},f,z);z.New=bC.Ctor(function(bG,bH,bI){var bJ;bJ=this;f.New.call(this);this.isConst=bG;this.current=bI;this.snap=bH;this.view=function(){return bJ.snap;};this.id=L.Int();},z);A.Map=function(bG,bH){var bI,bJ;bI=bH.s;return bI!=null&&bI.$==0?A.New({$:0,$0:bG(bI.$0)}):(bJ=A.New({$:3,$0:[],$1:[]}),(A.When(bH,function(bK){A.MarkDone(bJ,bH,bG(bK));},bJ),bJ));};A.WhenObsoleteRun=function(bG,bH){var bI;bI=bG.s;bI==null?bH():bI!=null&&bI.$==2?bI.$1.push(bH):bI!=null&&bI.$==3?bI.$1.push(bH):void 0;};A.When=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?A.Obsolete(bI):bJ!=null&&bJ.$==2?(A.EnqueueSafe(bJ.$1,bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),A.EnqueueSafe(bJ.$1,bI)):bH(bJ.$0);};A.MarkDone=function(bG,bH,bI){var bJ;if(bJ=bH.s,bJ!=null&&bJ.$==0)A.MarkForever(bG,bI);else A.MarkReady(bG,bI);};A.EnqueueSafe=function(bG,bH){var bI,bJ,bK,bL;bG.push(bH);if(bG.length%20===0){bI=bG.slice(0);_4.Clear(bG);for(bJ=0,bK=p.length(bI)-1;bJ<=bK;bJ++){bL=p.get(bI,bJ);typeof bL=="object"?function(bM){if(bM.s)bG.push(bM);}(bL):function(bM){bG.push(bM);}(bL);}}else void 0;};A.MarkForever=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:0,$0:bH};bJ=bI.$0;for(bK=0,bL=p.length(bJ)-1;bK<=bL;bK++)(p.get(bJ,bK))(bH);}else void 0;};A.MarkReady=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:2,$0:bH,$1:bI.$1};bJ=bI.$0;for(bK=0,bL=p.length(bJ)-1;bK<=bL;bK++)(p.get(bJ,bK))(bH);}else void 0;};A.WhenRun=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?bI():bJ!=null&&bJ.$==2?(bJ.$1.push(bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),bJ.$1.push(bI)):bH(bJ.$0);};A.Map3=function(bG,bH,bI,bJ){var bK,bL,bM,bN;function bO(bP){var bQ,bR,bS,bT;if(!(bQ=bN.s,bQ!=null&&bQ.$==0||bQ!=null&&bQ.$==2)){bR=A.ValueAndForever(bH);bS=A.ValueAndForever(bI);bT=A.ValueAndForever(bJ);bR!=null&&bR.$==1?bS!=null&&bS.$==1?bT!=null&&bT.$==1?bR.$0[1]&&bS.$0[1]&&bT.$0[1]?A.MarkForever(bN,bG(bR.$0[0],bS.$0[0],bT.$0[0])):A.MarkReady(bN,bG(bR.$0[0],bS.$0[0],bT.$0[0])):void 0:void 0:void 0;}}bK=bH.s;bL=bI.s;bM=bJ.s;return bK!=null&&bK.$==0?bL!=null&&bL.$==0?bM!=null&&bM.$==0?A.New({$:0,$0:bG(bK.$0,bL.$0,bM.$0)}):A.Map3Opt1(bG,bK.$0,bL.$0,bJ):bM!=null&&bM.$==0?A.Map3Opt2(bG,bK.$0,bM.$0,bI):A.Map3Opt3(bG,bK.$0,bI,bJ):bL!=null&&bL.$==0?bM!=null&&bM.$==0?A.Map3Opt4(bG,bL.$0,bM.$0,bH):A.Map3Opt5(bG,bL.$0,bH,bJ):bM!=null&&bM.$==0?A.Map3Opt6(bG,bM.$0,bH,bI):(bN=A.New({$:3,$0:[],$1:[]}),(A.When(bH,bO,bN),A.When(bI,bO,bN),A.When(bJ,bO,bN),bN));};A.Sequence=function(bG){var bH,bI,bJ;function bK(bL){var bM;if(bJ[0]===0){bM=p.map(function(bN){var bO;bO=bN.s;return bO!=null&&bO.$==0?bO.$0:bO!=null&&bO.$==2?bO.$0:g.FailWith("value not found by View.Sequence");},bH);p.forall(function(bN){var bO;bO=bN.s;return bO!=null&&bO.$==0;},bH)?A.MarkForever(bI,bM):A.MarkReady(bI,bM);}else bJ[0]--;}bH=p.ofSeq(bG);return bH.length==0?A.New({$:0,$0:[]}):(bI=A.New({$:3,$0:[],$1:[]}),(bJ=[p.length(bH)-1],(p.iter(function(bL){A.When(bL,bK,bI);},bH),bI)));};A.Map2=function(bG,bH,bI){var bJ,bK,bL;function bM(bN){var bO,bP,bQ;if(!(bO=bL.s,bO!=null&&bO.$==0||bO!=null&&bO.$==2)){bP=A.ValueAndForever(bH);bQ=A.ValueAndForever(bI);bP!=null&&bP.$==1?bQ!=null&&bQ.$==1?bP.$0[1]&&bQ.$0[1]?A.MarkForever(bL,bG(bP.$0[0],bQ.$0[0])):A.MarkReady(bL,bG(bP.$0[0],bQ.$0[0])):void 0:void 0;}}bJ=bH.s;bK=bI.s;return bJ!=null&&bJ.$==0?bK!=null&&bK.$==0?A.New({$:0,$0:bG(bJ.$0,bK.$0)}):A.Map2Opt1(bG,bJ.$0,bI):bK!=null&&bK.$==0?A.Map2Opt2(bG,bK.$0,bH):(bL=A.New({$:3,$0:[],$1:[]}),(A.When(bH,bM,bL),A.When(bI,bM,bL),bL));};A.Map2Unit=function(bG,bH){var bI,bJ,bK;function bL(){var bM,bN,bO;if(!(bM=bK.s,bM!=null&&bM.$==0||bM!=null&&bM.$==2)){bN=A.ValueAndForever(bG);bO=A.ValueAndForever(bH);bN!=null&&bN.$==1?bO!=null&&bO.$==1?bN.$0[1]&&bO.$0[1]?A.MarkForever(bK,null):A.MarkReady(bK,null):void 0:void 0;}}bI=bG.s;bJ=bH.s;return bI!=null&&bI.$==0?bJ!=null&&bJ.$==0?A.New({$:0,$0:null}):bH:bJ!=null&&bJ.$==0?bG:(bK=A.New({$:3,$0:[],$1:[]}),(A.When(bG,bL,bK),A.When(bH,bL,bK),bK));};A.Copy=function(bG){var bH,bI,bJ;bH=bG.s;return bH==null?bG:bH!=null&&bH.$==2?(bI=A.New({$:2,$0:bH.$0,$1:[]}),(A.WhenObsolete(bG,bI),bI)):bH!=null&&bH.$==3?(bJ=A.New({$:3,$0:[],$1:[]}),(A.When(bG,function(bK){A.MarkDone(bJ,bG,bK);},bJ),bJ)):bG;};A.Map3Opt1=function(bG,bH,bI,bJ){return A.Map(function(bK){return bG(bH,bI,bK);},bJ);};A.Map3Opt2=function(bG,bH,bI,bJ){return A.Map(function(bK){return bG(bH,bK,bI);},bJ);};A.Map3Opt3=function(bG,bH,bI,bJ){return A.Map2(function(bK,bL){return bG(bH,bK,bL);},bI,bJ);};A.Map3Opt4=function(bG,bH,bI,bJ){return A.Map(function(bK){return bG(bK,bH,bI);},bJ);};A.Map3Opt5=function(bG,bH,bI,bJ){return A.Map2(function(bK,bL){return bG(bK,bH,bL);},bI,bJ);};A.Map3Opt6=function(bG,bH,bI,bJ){return A.Map2(function(bK,bL){return bG(bK,bL,bH);},bI,bJ);};A.ValueAndForever=function(bG){var bH;bH=bG.s;return bH!=null&&bH.$==0?{$:1,$0:[bH.$0,true]}:bH!=null&&bH.$==2?{$:1,$0:[bH.$0,false]}:null;};A.Map2Opt1=function(bG,bH,bI){return A.Map(function(bJ){return bG(bH,bJ);},bI);};A.Map2Opt2=function(bG,bH,bI){return A.Map(function(bJ){return bG(bJ,bH);},bI);};A.WhenObsolete=function(bG,bH){var bI;bI=bG.s;bI==null?A.Obsolete(bH):bI!=null&&bI.$==2?A.EnqueueSafe(bI.$1,bH):bI!=null&&bI.$==3?A.EnqueueSafe(bI.$1,bH):void 0;};B.NewFromSeq=function(bG){var bH,bI,bJ;bH={};bI=Q.Get(bG);try{while(bI.MoveNext()){bJ=bI.Current();bH[bJ[0]]=bJ[1];}}finally{if("Dispose"in bI)bI.Dispose();}return bH;};C.Static=function(bG){return new M({$:3,$0:bG});};C.Dynamic=function(bG,bH){return new M({$:1,$0:new N.New(bG,bH)});};C.Insert=function(bG,bH){var bI,bJ,bK;function bL(bM){if(!(bM===null))if(bM!=null&&bM.$==1)bI.push(bM.$0);else if(bM!=null&&bM.$==2){bL(bM.$0);bL(bM.$1);}else if(bM!=null&&bM.$==3)bM.$0(bG);else if(bM!=null&&bM.$==4)bJ.push(bM.$0);}bI=[];bJ=[];bL(bH);bK=bI.slice(0);return _7.New(bG,C.Flags(bH),bK,bJ.length===0?null:{$:1,$0:function(bM){J.iter(function(bN){bN(bM);},bJ);}});};C.Updates=function(bG){return _.MapTreeReduce(function(bH){return bH.NChanged();},o.Const(),o.Map2Unit,bG.DynNodes);};C.Empty=function(bG){return _7.New(bG,0,[],null);};C.Flags=function(bG){return bG!==null&&bG.hasOwnProperty("flags")?bG.flags:0;};C.EmptyAttr=function(){bk.$cctor();return bk.EmptyAttr;};C.HasChangeAnim=function(bG){var bH;bH=4;return(bG.DynFlags&bH)===bH;};C.GetChangeAnim=function(bG){return C.GetAnim(bG,function(bH,bI){return bH.NGetChangeAnim(bI);});};C.HasEnterAnim=function(bG){var bH;bH=1;return(bG.DynFlags&bH)===bH;};C.GetEnterAnim=function(bG){return C.GetAnim(bG,function(bH,bI){return bH.NGetEnterAnim(bI);});};C.HasExitAnim=function(bG){var bH;bH=2;return(bG.DynFlags&bH)===bH;};C.GetExitAnim=function(bG){return C.GetAnim(bG,function(bH,bI){return bH.NGetExitAnim(bI);});};C.AppendTree=function(bG,bH){var bI;return bG===null?bH:bH===null?bG:(bI=new M({$:2,$0:bG,$1:bH}),(C.SetFlags(bI,C.Flags(bG)|C.Flags(bH)),bI));};C.GetAnim=function(bG,bH){return bd.Concat(p.map(function(bI){return bH(bI,bG.DynElem);},bG.DynNodes));};C.SetFlags=function(bG,bH){bG.flags=bH;};C.Sync=function(bG,bH){p.iter(function(bI){bI.NSync(bG);},bH.DynNodes);};D.AddClass=function(bG,bH){a.jQuery(bG).addClass(bH);};D.RemoveClass=function(bG,bH){a.jQuery(bG).removeClass(bH);};D.ChildrenArray=function(bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.childNodes.length-1;bI<=bJ;bI++)bH.push(bG.childNodes[bI]);return bH;};D.IterSelector=function(bG,bH,bI){var bJ,bK,bL;bJ=bG.querySelectorAll(bH);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)bI(bJ[bK]);};D.CreateText=function(bG){return D.Doc().createTextNode(bG);};D.SetAttr=function(bG,bH,bI){bG.setAttribute(bH,bI);};D.Doc=function(){bq.$cctor();return bq.Doc;};D.InsertAt=function(bG,bH,bI){var bJ;if(!(bI.parentNode===bG&&bH===(bJ=bI.nextSibling,h.Equals(bJ,null)?null:bJ)))bG.insertBefore(bI,bH);};D.RemoveNode=function(bG,bH){if(bH.parentNode===bG)bG.removeChild(bH);};E.IsNullOrWhiteSpace=function(bG){return bG==null||(new a.RegExp("^\\s*$")).test(bG);};E.concat=function(bG,bH){return p.ofSeq(bH).join(bG);};E.StartsWith=function(bG,bH){return bG.substring(0,bH.length)==bH;};E.SplitChars=function(bG,bH,bI){return E.Split(bG,new a.RegExp("["+E.RegexEscape(bH.join(""))+"]"),bI);};E.RegexEscape=function(bG){return bG.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};E.Split=function(bG,bH,bI){return bI===1?p.filter(function(bJ){return bJ!=="";},E.SplitWith(bG,bH)):E.SplitWith(bG,bH);};E.SplitWith=function(bG,bH){return bG.split(bH);};E.forall=function(bG,bH){return J.forall(bG,E.protect(bH));};E.protect=function(bG){return bG===null?"":bG;};G=F.Dictionary=bC.Class({get_Item:function(bG){return this.get(bG);},set_Item:function(bG,bH){this.set(bG,bH);},get:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI?p.pick(function(bJ){var bK;bK=g.KeyValue(bJ);return bH.equals.apply(null,[bK[0],bG])?{$:1,$0:bK[1]}:null;},bI):P.notPresent();},set:function(bG,bH){var bI,bJ,bK,bL;bI=this;bJ=this.hash(bG);bK=this.data[bJ];bK?(bL=p.tryFindIndex(function(bM){return bI.equals.apply(null,[(g.KeyValue(bM))[0],bG]);},bK),bL==null?(this.count=this.count+1,bK.push({K:bG,V:bH})):bK[bL.$0]={K:bG,V:bH}):(this.count=this.count+1,this.data[bJ]=new a.Array({K:bG,V:bH}));},TryGetValue:function(bG,bH){var bI,bJ,bK;bI=this;bJ=this.data[this.hash(bG)];return bJ&&(bK=p.tryPick(function(bL){var bM;bM=g.KeyValue(bL);return bI.equals.apply(null,[bM[0],bG])?{$:1,$0:bM[1]}:null;},bJ),bK!=null&&bK.$==1&&(bH.set(bK.$0),true));},ContainsKey:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI&&p.exists(function(bJ){return bH.equals.apply(null,[(g.KeyValue(bJ))[0],bG]);},bI);},GetEnumerator:function(){return Q.Get0(this);},GetEnumerator0:function(){return Q.Get0(p.concat(v.GetFieldValues(this.data)));}},k,G);G.New$5=bC.Ctor(function(){G.New$6.call(this,[],h.Equals,h.Hash);},G);G.New$6=bC.Ctor(function(bG,bH,bI){var bJ,bK;this.equals=bH;this.hash=bI;this.count=0;this.data=[];bJ=Q.Get(bG);try{while(bJ.MoveNext()){bK=bJ.Current();this.set(bK.K,bK.V);}}finally{if("Dispose"in bJ)bJ.Dispose();}},G);H=F.HashSet=bC.Class({Add:function(bG){return this.add(bG);},Contains:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrContains(bG,bH);},add:function(bG){var bH,bI;bH=this.hash(bG);bI=this.data[bH];return bI==null?(this.data[bH]=[bG],this.count=this.count+1,true):this.arrContains(bG,bI)?false:(bI.push(bG),this.count=this.count+1,true);},arrContains:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG]))bI=false;else bJ=bJ+1;return!bI;},IntersectWith:function(bG){var bH,bI,bJ,bK,bL;bH=new H.New$4(bG,this.equals,this.hash);bI=_3.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=bI[bJ];!bH.Contains(bL)?this.Remove(bL):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bG){var bH,bI,bJ,bK;bH=0;bI=_3.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)p.set(bG,bJ,bI[bJ]);},ExceptWith:function(bG){var bH;bH=Q.Get(bG);try{while(bH.MoveNext())this.Remove(bH.Current());}finally{if("Dispose"in bH)bH.Dispose();}},Remove:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrRemove(bG,bH)&&(this.count=this.count-1,true);},arrRemove:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG])){bH.splice.apply(bH,[bJ,1]);bI=false;}else bJ=bJ+1;return!bI;},GetEnumerator:function(){return Q.Get(_3.concat(this.data));},GetEnumerator0:function(){return Q.Get(_3.concat(this.data));}},k,H);H.New$3=bC.Ctor(function(){H.New$4.call(this,[],h.Equals,h.Hash);},H);H.New$4=bC.Ctor(function(bG,bH,bI){var bJ;this.equals=bH;this.hash=bI;this.data=[];this.count=0;bJ=Q.Get(bG);try{while(bJ.MoveNext())this.add(bJ.Current());}finally{if("Dispose"in bJ)bJ.Dispose();}},H);H.New$2=bC.Ctor(function(bG){H.New$4.call(this,bG,h.Equals,h.Hash);},H);I.Box=a.id;p.choose=function(bG,bH){var bI,bJ,bK,bL;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++){bL=bG(bH[bJ]);bL==null?void 0:bI.push(bL.$0);}return bI;};p.pick=function(bG,bH){var bI;bI=p.tryPick(bG,bH);return bI==null?g.FailWith("KeyNotFoundException"):bI.$0;};p.tryFindIndex=function(bG,bH){var bI,bJ;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bG(bH[bJ])?bI={$:1,$0:bJ}:void 0;bJ=bJ+1;}return bI;};p.tryPick=function(bG,bH){var bI,bJ,bK;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bK=bG(bH[bJ]);bK!=null&&bK.$==1?bI=bK:void 0;bJ=bJ+1;}return bI;};p.iter=function(bG,bH){var bI,bJ;for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)bG(bH[bI]);};p.map=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bH.length);for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)bI[bJ]=bG(bH[bJ]);return bI;};p.filter=function(bG,bH){var bI,bJ,bK;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)if(bG(bH[bJ]))bI.push(bH[bJ]);return bI;};p.concat=function(bG){return a.Array.prototype.concat.apply([],p.ofSeq(bG));};p.exists=function(bG,bH){var bI,bJ,bK,bL;bI=false;bJ=0;bL=p.length(bH);while(!bI&&bJ<bL)if(bG(bH[bJ]))bI=true;else bJ=bJ+1;return bI;};p.foldBack=function(bG,bH,bI){var bJ,bK,bL,bM,bN;bJ=bI;bL=bH.length;for(bM=1,bN=bL;bM<=bN;bM++)bJ=bG(bH[bL-bM],bJ);return bJ;};p.ofSeq=function(bG){var bH,bI;if(bG instanceof a.Array)return bG.slice();else if(bG instanceof m)return p.ofList(bG);else{bH=[];bI=Q.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if("Dispose"in bI)bI.Dispose();}}};p.ofList=function(bG){var bH,bI;bI=[];bH=bG;while(!(bH.$==0)){bI.push(l.head(bH));bH=l.tail(bH);}return bI;};p.forall=function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=p.length(bH);while(bI&&bJ<bL)if(bG(bH[bJ]))bJ=bJ+1;else bI=false;return bI;};p.create=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH;return bI;};p.init=function(bG,bH){var bI,bJ,bK;bG<0?g.FailWith("Negative size given."):null;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH(bJ);return bI;};J.append=function(bG,bH){return{GetEnumerator:function(){var bI,bJ;bI=Q.Get(bG);bJ=[true];return new S.New(bI,null,function(bK){var bL;return bK.s.MoveNext()?(bK.c=bK.s.Current(),true):(bL=bK.s,!h.Equals(bL,null)?bL.Dispose():void 0,bK.s=null,bJ[0]&&(bJ[0]=false,bK.s=Q.Get(bH),bK.s.MoveNext()?(bK.c=bK.s.Current(),true):(bK.s.Dispose(),bK.s=null,false)));},function(bK){var bL;bL=bK.s;!h.Equals(bL,null)?bL.Dispose():void 0;});}};};J.fold=function(bG,bH,bI){var bJ,bK;bJ=bH;bK=Q.Get(bI);try{while(bK.MoveNext())bJ=bG(bJ,bK.Current());return bJ;}finally{if("Dispose"in bK)bK.Dispose();}};J.iter=function(bG,bH){var bI;bI=Q.Get(bH);try{while(bI.MoveNext())bG(bI.Current());}finally{if("Dispose"in bI)bI.Dispose();}};J.map=function(bG,bH){return{GetEnumerator:function(){var bI;bI=Q.Get(bH);return new S.New(null,null,function(bJ){return bI.MoveNext()&&(bJ.c=bG(bI.Current()),true);},function(){bI.Dispose();});}};};J.forall=function(bG,bH){return!J.exists(function(bI){return!bG(bI);},bH);};J.max=function(bG){var bH,bI,bJ;bH=Q.Get(bG);try{if(!bH.MoveNext())J.seqEmpty();bI=bH.Current();while(bH.MoveNext()){bJ=bH.Current();h.Compare(bJ,bI)===1?bI=bJ:void 0;}return bI;}finally{if("Dispose"in bH)bH.Dispose();}};J.exists=function(bG,bH){var bI,bJ;bI=Q.Get(bH);try{bJ=false;while(!bJ&&bI.MoveNext())bJ=bG(bI.Current());return bJ;}finally{if("Dispose"in bI)bI.Dispose();}};J.seqEmpty=function(){return g.FailWith("The input sequence was empty.");};L.Int=function(){L.set_counter(L.counter()+1);return L.counter();};L.set_counter=function(bG){W.$cctor();W.counter=bG;};L.counter=function(){W.$cctor();return W.counter;};M=e.AttrProxy=bC.Class({},null,M);M.Handler=function(bG,bH){return M.HandlerImpl(bG,bH);};M.Concat=function(bG){var bH;bH=_.ofSeqNonCopying(bG);return _.TreeReduce(C.EmptyAttr(),M.Append,bH);};M.Create=function(bG,bH){return C.Static(function(bI){D.SetAttr(bI,bG,bH);});};M.HandlerImpl=function(bG,bH){return C.Static(function(bI){bI.addEventListener(bG,function(bJ){return(bH(bI))(bJ);},false);});};M.Append=function(bG,bH){return C.AppendTree(bG,bH);};N=e.DynamicAttrNode=bC.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bG){return bd.get_Empty();},NGetEnterAnim:function(bG){return bd.get_Empty();},NGetExitAnim:function(bG){return bd.get_Empty();},NSync:function(bG){if(this.dirty){(this.push(bG))(this.value);this.dirty=false;}}},k,N);N.New=bC.Ctor(function(bG,bH){var bI;bI=this;this.push=bH;this.value=void 0;this.dirty=false;this.updates=o.Map(function(bJ){bI.value=bJ;bI.dirty=true;},bG);},N);A.Obsolete=function(bG){var bH,bI,bJ,bK,bL;bI=bG.s;if(bI==null||(bI!=null&&bI.$==2?(bH=bI.$1,false):bI!=null&&bI.$==3?(bH=bI.$1,false):true))void 0;else{bG.s=null;for(bJ=0,bK=p.length(bH)-1;bJ<=bK;bJ++){bL=p.get(bH,bJ);typeof bL=="object"?function(bM){A.Obsolete(bM);}(bL):bL();}}};A.New=function(bG){return{s:bG};};O=e.Doc=bC.Class({},k,O);O.RunFullDocTemplate=function(bG){var bH,bI;O.PrepareTemplateStrict("",null,D.ChildrenArray(a.document.body),{$:1,$0:a.document.body});bH=O.ChildrenTemplate(a.document.body,bG);bI=a.document.body;(function(bJ){O.RunInPlace(bI,bJ);}(bH));return bH;};O.PrepareTemplateStrict=function(bG,bH,bI,bJ){var bK,bL;function bM(bY){var b0,b1,b2,b3,b4,b5,b6,b7;function bZ(b8){var b9;b9=bY.getAttribute(b8);b9===null?void 0:bY.setAttribute(b8,b9.toLowerCase());}b0=bY.attributes;b1=[];b2=[];b3=[];for(b4=0,b5=b0.length-1;b4<=b5;b4++){b6=b0.item(b4);E.StartsWith(b6.nodeName,"ws-on")&&b6.nodeName!=="ws-onafterrender"&&b6.nodeName!=="ws-on"?(b1.push(b6.nodeName),b2.push(Z.string(b6.nodeName,{$:1,$0:"ws-on".length},null)+":"+b6.nodeValue.toLowerCase())):!E.StartsWith(b6.nodeName,"ws-")&&(new a.RegExp(_0.TextHoleRE())).test(b6.nodeValue)?(b6.nodeValue=(b7=new a.RegExp(_0.TextHoleRE(),"g"),b6.nodeValue.replace(b7,function(b8,b9){return"${"+b9.toLowerCase()+"}";})),b3.push(b6.nodeName)):void 0;}!(b2.length==0)?bY.setAttribute("ws-on",E.concat(" ",b2)):void 0;!(b3.length==0)?bY.setAttribute("ws-attr-holes",E.concat(" ",b3)):void 0;bZ("ws-hole");bZ("ws-replace");bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");p.iter(function(b8){bY.removeAttribute(b8);},b1);}function bN(bY){var bZ,b0,b1,b2,b3,b4;bZ=null;b0=0;b2=bY.textContent;b3=new a.RegExp(_0.TextHoleRE(),"g");while(bZ=b3.exec(b2),bZ!==null){bY.parentNode.insertBefore(a.document.createTextNode(Z.string(b2,{$:1,$0:b0},{$:1,$0:b3.lastIndex-p.get(bZ,0).length-1})),bY);b0=b3.lastIndex;b4=a.document.createElement("span");b4.setAttribute("ws-replace",p.get(bZ,1).toLowerCase());bY.parentNode.insertBefore(b4,bY);}b3.lastIndex=0;bY.textContent=Z.string(b2,{$:1,$0:b0},null);}function bO(bY,bZ){function b0(b1){D.IterSelector(bY,"["+b1+"]",function(b2){var b3,b4;b3=(b4=null,[bZ.TryGetValue(b2.getAttribute(b1).toLowerCase(),{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);b3[0]?b2.setAttribute(b1,b3[1]):void 0;});}b0("ws-hole");b0("ws-replace");b0("ws-attr");b0("ws-onafterrender");b0("ws-var");D.IterSelector(bY,"[ws-on]",function(b1){b1.setAttribute("ws-on",E.concat(" ",p.map(function(b2){var b3,b4,b5;b3=E.SplitChars(b2,[":"],1);b4=(b5=null,[bZ.TryGetValue(p.get(b3,1),{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);return b4[0]?p.get(b3,0)+":"+b4[1]:b2;},E.SplitChars(b1.getAttribute("ws-on"),[" "],1))));});return D.IterSelector(bY,"[ws-attr-holes]",function(b1){var b2,b3,b4;b2=E.SplitChars(b1.getAttribute("ws-attr-holes"),[" "],1);for(b3=0,b4=b2.length-1;b3<=b4;b3++)(function(){var b5;function b6(b7,b8){var b9;b9=g.KeyValue(b8);return b7.replace(new a.RegExp("\\${"+b9[0]+"}","ig"),"${"+b9[1]+"}");}b5=p.get(b2,b3);return b1.setAttribute(b5,(((bC.Curried3(J.fold))(b6))(b1.getAttribute(b5)))(bZ));}());});}function bP(bY,bZ){var b0,b1,b2,b3,b4;bM(bZ);b0=bZ.nodeName.toLowerCase();b1=bY.querySelector("[ws-attr="+b0+"]");if(h.Equals(b1,null))return bD.warn("Filling non-existent attr hole",b0);else{b1.removeAttribute("ws-attr");for(b2=0,b3=bZ.attributes.length-1;b2<=b3;b2++){b4=bZ.attributes.item(b2);b4.name==="class"&&b1.hasAttribute("class")?b1.setAttribute("class",b1.getAttribute("class")+" "+b4.nodeValue):b1.setAttribute(b4.name,b4.nodeValue);}return;}}function bQ(bY,bZ){function b0(b1){D.IterSelector(bY,"["+b1+"]",function(b2){if(!bZ.Contains(b2.getAttribute(b1)))b2.removeAttribute(b1);});}b0("ws-attr");b0("ws-onafterrender");b0("ws-var");D.IterSelector(bY,"[ws-hole]",function(b1){if(!bZ.Contains(b1.getAttribute("ws-hole"))){b1.removeAttribute("ws-hole");while(b1.hasChildNodes())b1.removeChild(b1.lastChild);}});D.IterSelector(bY,"[ws-replace]",function(b1){if(!bZ.Contains(b1.getAttribute("ws-replace")))b1.parentNode.removeChild(b1);});D.IterSelector(bY,"[ws-on]",function(b1){b1.setAttribute("ws-on",E.concat(" ",p.filter(function(b2){return bZ.Contains(p.get(E.SplitChars(b2,[":"],1),1));},E.SplitChars(b1.getAttribute("ws-on"),[" "],1))));});return D.IterSelector(bY,"[ws-attr-holes]",function(b1){var b2,b3,b4,b5,b6;b2=E.SplitChars(b1.getAttribute("ws-attr-holes"),[" "],1);for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=p.get(b2,b3);b1.setAttribute(b5,(b6=new a.RegExp(_0.TextHoleRE(),"g"),b1.getAttribute(b5).replace(b6,function(b7,b8){return bZ.Contains(b8)?b7:"";})));}});}function bR(bY,bZ){var b0;b0=bY.querySelector("[ws-replace]");return h.Equals(b0,null)?(bD.warn("Filling non-existent text hole",bH),null):(b0.parentNode.replaceChild(new a.Text(bZ),b0),{$:1,$0:b0.getAttribute("ws-replace")});}function bS(bY,bZ,b0){while(true)if(bY.hasChildNodes())b0=bZ.insertBefore(bY.lastChild,b0);else return null;}function bT(bY,bZ,b0){var b1,b2,b3,b4,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function b5(cq){}while(true)switch(bY){case 0:b6=Z.string(bZ.nodeName,{$:1,$0:3},null).toLowerCase();b7=(b1=b6.indexOf("."),b1===-1?[bG,b6]:[Z.string(b6,null,{$:1,$0:b1-1}),Z.string(b6,{$:1,$0:b1+1},null)]);b8=b7[1];b9=b7[0];if(!_0.LoadedTemplates().ContainsKey(b9))return bD.warn("Instantiating non-loaded template",b8);else{b_=_0.LoadedTemplates().get_Item(b9);if(!b_.ContainsKey(b8))return bD.warn("Instantiating non-loaded template",b8);else{b$=b_.get_Item(b8);ca=b$.cloneNode(true);cb=new H.New$3();cc=new G.New$5();cd=bZ.attributes;for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd.item(ce).name.toLowerCase();cc.set_Item(cg,(ch=cd.item(ce).nodeValue,ch===""?cg:ch.toLowerCase()));!cb.Add(cg)?bD.warn("Hole mapped twice",cg):void 0;}for(ci=0,cj=bZ.childNodes.length-1;ci<=cj;ci++){ck=bZ.childNodes[ci];h.Equals(ck.nodeType,V.ELEMENT_NODE)?!cb.Add(ck.nodeName.toLowerCase())?bD.warn("Hole filled twice",b8):void 0:void 0;}cl=bZ.childNodes.length===1&&h.Equals(bZ.firstChild.nodeType,V.TEXT_NODE);if(cl){b3=bR(ca,bZ.firstChild.textContent);((function(cq){return function(cr){if(cr!=null)cq(cr.$0);};}((b4=function(cq){return function(cr){return cq.Add(cr);};}(cb),function(cq){return b5(b4(cq));})))(b3));}bQ(ca,cb);if(!cl){for(cm=0,cn=bZ.childNodes.length-1;cm<=cn;cm++){co=bZ.childNodes[cm];h.Equals(co.nodeType,V.ELEMENT_NODE)?co.hasAttributes()?bP(ca,co):bU(ca,co):void 0;}}bO(ca,cc);(((function(cq){function cr(cs,ct){return bS(cq,cs,ct);}return function(cs){return function(ct){return cr(cs,ct);};};}(ca))(bZ.parentNode))(bZ));bZ.parentNode.removeChild(bZ);return;}}break;case 1:if(b0!==null){cp=b0.nextSibling;if(h.Equals(b0.nodeType,V.TEXT_NODE))bN(b0);else if(h.Equals(b0.nodeType,V.ELEMENT_NODE))bW(b0);b0=cp;}else return null;break;}}function bU(bY,bZ){var b0,b2,b3;function b1(b4,b5){var b6,b7,b8;if(b2==="title"&&bZ.hasChildNodes()){b6=bE.parseHTML(bZ.textContent);bZ.removeChild(bZ.firstChild);for(b7=0,b8=b6.length-1;b7<=b8;b7++)bZ.appendChild(p.get(b6,b7));}else null;bW(bZ);return bS(bZ,b4,b5);}b2=bZ.nodeName.toLowerCase();D.IterSelector(bY,"[ws-attr-holes]",function(b4){var b5,b6,b7,b8,b9;b5=E.SplitChars(b4.getAttribute("ws-attr-holes"),[" "],1);for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=p.get(b5,b6);b4.setAttribute(b8,(b9=new a.RegExp("\\${"+b2+"}","ig"),b4.getAttribute(b8).replace(b9,bZ.textContent)));}});b3=bY.querySelector("[ws-hole="+b2+"]");if(h.Equals(b3,null)){b0=bY.querySelector("[ws-replace="+b2+"]");return h.Equals(b0,null)?null:(b1(b0.parentNode,b0),void b0.parentNode.removeChild(b0));}else{while(b3.hasChildNodes())b3.removeChild(b3.lastChild);b3.removeAttribute("ws-hole");return b1(b3,null);}}function bV(bY){return bT(0,bY);}function bW(bY){var bZ,b0;if(E.StartsWith(bY.nodeName.toLowerCase(),"ws-")&&!bY.hasAttribute("ws-template"))bV(bY);else{bM(bY);bZ=bY.getAttribute("ws-template");if(bZ===null){b0=bY.getAttribute("ws-children-template");if(b0===null)bX(bY,bY.firstChild);else{bY.removeAttribute("ws-children-template");O.PrepareTemplate(bG,{$:1,$0:b0},function(){return D.ChildrenArray(bY);});while(bY.hasChildNodes())bY.removeChild(bY.lastChild);}}else O.PrepareSingleTemplate(bG,{$:1,$0:bZ},bY);}}function bX(bY,bZ){return bT(1,bY,bZ);}bK=bJ!=null&&bJ.$==1?bJ.$0:O.FakeRoot(bI);bL=(bH==null?"":bH.$0).toLowerCase();_0.LoadedTemplateFile(bG).set_Item(bL,bK);p.length(bI)>0?bX(bK,p.get(bI,0)):void 0;};O.ChildrenTemplate=function(bG,bH){var bI,bJ,bK,bL,bM;bI=O.InlineTemplate(bG,bH);bJ=bI[1];bK=bI[0];bL=bK.Els;return!h.Equals(bL,null)&&bL.length===1&&(p.get(bL,0)instanceof V&&(h.Equals(p.get(bL,0).nodeType,V.ELEMENT_NODE)&&(bM=p.get(bL,0),true)))?_1.TreeNode(bK,bJ):O.Mk({$:6,$0:bK},bJ);};O.RunInPlace=function(bG,bH){var bI;bI=bH.docNode;o.Sink(_2.StartProcessor(_0.PerformAnimatedUpdate(_0.CreateRunState(bG,bI),bI)),bH.updates);};O.PrepareTemplate=function(bG,bH,bI){var bJ,bK,bL,bM,bN;if(!_0.LoadedTemplateFile(bG).ContainsKey(bH==null?"":bH.$0)){bJ=bI();for(bK=0,bL=bJ.length-1;bK<=bL;bK++){bM=p.get(bJ,bK);bN=bM.parentNode;h.Equals(bN,null)?void 0:bN.removeChild(bM);}O.PrepareTemplateStrict(bG,bH,bJ,null);}};O.PrepareSingleTemplate=function(bG,bH,bI){var bJ,bK,bL;bI.removeAttribute("ws-template");bJ=bI.getAttribute("ws-replace");bJ===null?void 0:(bI.removeAttribute("ws-replace"),bK=bI.parentNode,h.Equals(bK,null)?void 0:(bL=a.document.createElement(bI.tagName),bL.setAttribute("ws-replace",bJ),bK.replaceChild(bL,bI)));O.PrepareTemplateStrict(bG,bH,[bI],null);};O.FakeRoot=function(bG){var bH,bI,bJ;bH=a.document.createElement("div");for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH.appendChild(p.get(bG,bI));return bH;};O.InlineTemplate=function(bG,bH){var bI,bJ,bM,bN,bO,bP,bQ,bR,bS;function bK(bT,bU){var bV,bW,bX;bV=C.Insert(bT,bU);bN.push(C.Updates(bV));bO.push([bT,bV]);bW=bC.GetOptional(bV.OnAfterRender);return bW==null?null:(bX=bW.$0,void bP.push(function(){bX(bT);}));}function bL(bT){var bU,bV;bU=(bV=null,[bQ.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?bU[1].$==0?{$:1,$0:bU[1].$1}:bU[1].$==1?{$:1,$0:O.TextNode(bU[1].$1)}:bU[1].$==2?{$:1,$0:O.TextView(bU[1].$1)}:bU[1].$==7?{$:1,$0:O.TextView(bU[1].$1.get_View())}:bU[1].$==8?{$:1,$0:O.TextView(o.Map(a.String,bU[1].$1.get_View()))}:bU[1].$==9?{$:1,$0:O.TextView(o.Map(function(bW){return bW.get_Input();},bU[1].$1.get_View()))}:bU[1].$==10?{$:1,$0:O.TextView(o.Map(a.String,bU[1].$1.get_View()))}:bU[1].$==11?{$:1,$0:O.TextView(o.Map(function(bW){return bW.get_Input();},bU[1].$1.get_View()))}:bU[1].$==12?{$:1,$0:O.TextView(o.Map(a.String,bU[1].$1.get_View()))}:(bD.warn("Content hole filled with attribute data",bT),null):null;}bM=[];bN=[];bO=[];bP=[];bQ=new G.New$5();bR=Q.Get(bH);try{while(bR.MoveNext()){bS=bR.Current();bQ.set_Item(bS.$0,bS);}}finally{if("Dispose"in bR)bR.Dispose();}bI=D.ChildrenArray(bG);D.IterSelector(bG,"[ws-hole]",function(bT){var bU,bV,bW;bW=bT.getAttribute("ws-hole");bT.removeAttribute("ws-hole");while(bT.hasChildNodes())bT.removeChild(bT.lastChild);bU=bL(bW);bU!=null&&bU.$==1?(bV=bU.$0,_0.LinkElement(bT,bV.docNode),bM.push(X.New(C.Empty(bT),bV.docNode,null,bT,L.Int(),null)),bN.push(bV.updates)):void 0;});D.IterSelector(bG,"[ws-replace]",function(bT){var bU,bV,bW,bX,bY,bZ;bU=bL(bT.getAttribute("ws-replace"));bU!=null&&bU.$==1?(bV=bU.$0,bW=bT.parentNode,bX=a.document.createTextNode(""),bW.replaceChild(bX,bT),bY=_0.InsertBeforeDelim(bX,bV.docNode),bZ=p.tryFindIndex(function(b0){return bT===b0;},bI),bZ==null?void 0:p.set(bI,bZ.$0,bV.docNode),bM.push(X.New(C.Empty(bW),bV.docNode,{$:1,$0:[bY,bX]},bW,L.Int(),null)),bN.push(bV.updates)):void 0;});D.IterSelector(bG,"[ws-attr]",function(bT){var bU,bV,bW;bU=bT.getAttribute("ws-attr");bT.removeAttribute("ws-attr");bV=(bW=null,[bQ.TryGetValue(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);bV[0]?bV[1].$==3?bK(bT,bV[1].$1):bD.warn("Attribute hole filled with non-attribute data",bU):void 0;});D.IterSelector(bG,"[ws-on]",function(bT){bK(bT,M.Concat(p.choose(function(bU){var bV,bW,bX;bV=E.SplitChars(bU,[":"],1);bW=(bX=null,[bQ.TryGetValue(p.get(bV,1),{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);return bW[0]?bW[1].$==4?{$:1,$0:n.Handler(p.get(bV,0),bW[1].$1)}:bW[1].$==5?{$:1,$0:M.Handler(p.get(bV,0),bW[1].$2)}:(bD.warn("Event hole on"+p.get(bV,0)+" filled with non-event data",p.get(bV,1)),null):null;},E.SplitChars(bT.getAttribute("ws-on"),[" "],1))));bT.removeAttribute("ws-on");});D.IterSelector(bG,"[ws-onafterrender]",function(bT){var bU,bV,bW;bU=bT.getAttribute("ws-onafterrender");bV=(bW=null,[bQ.TryGetValue(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);bV[0]?bV[1].$==6?(bT.removeAttribute("ws-onafterrender"),bK(bT,n.OnAfterRender(bV[1].$1))):bD.warn("onafterrender hole filled with non-onafterrender data",bU):void 0;});D.IterSelector(bG,"[ws-var]",function(bT){var bU,bV,bW;bU=bT.getAttribute("ws-var");bT.removeAttribute("ws-var");bV=(bW=null,[bQ.TryGetValue(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);bV[0]?bV[1].$==7?bK(bT,n.Value(bV[1].$1)):bV[1].$==8?bK(bT,n.Checked(bV[1].$1)):bV[1].$==9?bK(bT,n.IntValue(bV[1].$1)):bV[1].$==10?bK(bT,n.IntValueUnchecked(bV[1].$1)):bV[1].$==11?bK(bT,n.FloatValue(bV[1].$1)):bV[1].$==12?bK(bT,n.FloatValueUnchecked(bV[1].$1)):bD.warn("Var hole filled with non-Var data",bU):void 0;});D.IterSelector(bG,"[ws-attr-holes]",function(bT){var bU,bV,bW,bX;bU=new a.RegExp(_0.TextHoleRE(),"g");bV=E.SplitChars(bT.getAttribute("ws-attr-holes"),[" "],1);bT.removeAttribute("ws-attr-holes");for(bW=0,bX=bV.length-1;bW<=bX;bW++)(function(){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_;b7=p.get(bV,bW);b8=bT.getAttribute(b7);bY=null;bZ=0;b9=[];while(bY=bU.exec(b8),bY!==null){b_=Z.string(b8,{$:1,$0:bZ},{$:1,$0:bU.lastIndex-p.get(bY,0).length-1});bZ=bU.lastIndex;b9.push([b_,p.get(bY,1)]);}b1=Z.string(b8,{$:1,$0:bZ},null);bU.lastIndex=0;b2=p.foldBack(function(b$,ca){return(function(cb){var cc,cd;cc=cb[0];cd=cb[1];return function(ce){var cf,cg,ch,ci,cj;cf=ce[0];cg=ce[1];ch=(ci=(cj=null,[bQ.TryGetValue(cd,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]),ci[0]?ci[1].$==1?{$:0,$0:ci[1].$1}:ci[1].$==2?{$:1,$0:ci[1].$1}:ci[1].$==7?{$:1,$0:ci[1].$1.get_View()}:ci[1].$==8?{$:1,$0:o.Map(a.String,ci[1].$1.get_View())}:ci[1].$==9?{$:1,$0:o.Map(function(ck){return ck.get_Input();},ci[1].$1.get_View())}:ci[1].$==10?{$:1,$0:o.Map(a.String,ci[1].$1.get_View())}:ci[1].$==11?{$:1,$0:o.Map(function(ck){return ck.get_Input();},ci[1].$1.get_View())}:ci[1].$==12?{$:1,$0:o.Map(a.String,ci[1].$1.get_View())}:(bD.warn("Attribute value hole filled with non-text data",cd),{$:0,$0:""}):{$:0,$0:""});return ch.$==1?[cc,new m({$:1,$0:cf===""?ch.$0:o.Map(function(ck){return ck+cf;},ch.$0),$1:cg})]:[cc+ch.$0+cf,cg];};}(b$))(ca);},b9,[b1,m.Empty]);return bK(bT,b2[1].$==1?b2[1].$1.$==1?b2[1].$1.$1.$==1?b2[1].$1.$1.$1.$==0?(b3=b2[0],n.Dynamic(b7,o.Map3(function(b$,ca,cb){return b3+b$+ca+cb;},b2[1].$0,b2[1].$1.$0,b2[1].$1.$1.$0))):(b4=b2[0],n.Dynamic(b7,o.Map(function(b$){return b4+E.concat("",b$);},o.Sequence(b2[1])))):(b5=b2[0],n.Dynamic(b7,o.Map2(function(b$,ca){return b5+b$+ca;},b2[1].$0,b2[1].$1.$0))):b2[0]===""?n.Dynamic(b7,b2[1].$0):(b6=b2[0],n.Dynamic(b7,o.Map(function(b$){return b6+b$;},b2[1].$0))):M.Create(b7,b2[0]));}());});return[bC.DeleteEmptyFields({Els:bI,Dirty:true,Holes:bM,Attrs:bO,Render:(bJ=bP.length==0?null:{$:1,$0:function(bT){p.iter(function(bU){bU(bT);},bP);}},bJ?bJ.$0:void 0)},["Render"]),_.TreeReduce(o.Const(),o.Map2Unit,bN)];};O.Mk=function(bG,bH){return new O.New(bG,bH);};O.TextNode=function(bG){return O.Mk({$:5,$0:D.CreateText(bG)},o.Const());};O.TextView=function(bG){var bH;bH=_0.CreateTextNode();return O.Mk({$:4,$0:bH},o.Map(function(bI){_0.UpdateTextNode(bH,bI);},bG));};O.New=bC.Ctor(function(bG,bH){this.docNode=bG;this.updates=bH;},O);P.notPresent=function(){return g.FailWith("The given key was not present in the dictionary.");};Q.Get=function(bG){return bG instanceof a.Array?Q.ArrayEnumerator(bG):h.Equals(typeof bG,"string")?Q.StringEnumerator(bG):bG.GetEnumerator();};Q.ArrayEnumerator=function(bG){return new S.New(0,null,function(bH){var bI;bI=bH.s;return bI<p.length(bG)&&(bH.c=p.get(bG,bI),bH.s=bI+1,true);},void 0);};Q.StringEnumerator=function(bG){return new S.New(0,null,function(bH){var bI;bI=bH.s;return bI<bG.length&&(bH.c=bG[bI],bH.s=bI+1,true);},void 0);};Q.Get0=function(bG){return bG instanceof a.Array?Q.ArrayEnumerator(bG):h.Equals(typeof bG,"string")?Q.StringEnumerator(bG):"GetEnumerator0"in bG?bG.GetEnumerator0():bG.GetEnumerator();};S=Q.T=bC.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},k,S);S.New=bC.Ctor(function(bG,bH,bI,bJ){this.s=bG;this.c=bH;this.n=bI;this.d=bJ;},S);o=e.View=bC.Class({},null,o);T.TryParseInt32=function(bG,bH){return T.TryParse(bG,-2147483648,2147483647,bH);};W.$cctor=function(){W.$cctor=a.ignore;W.counter=0;};X=e.DocElemNode=bC.Class({Equals:function(bG){return this.ElKey===bG.ElKey;},GetHashCode:function(){return this.ElKey;}},null,X);X.New=function(bG,bH,bI,bJ,bK,bL){var bM;return new X((bM={Attr:bG,Children:bH,El:bJ,ElKey:bK},(bC.SetOptional(bM,"Delimiters",bI),bC.SetOptional(bM,"Render",bL),bM)));};Z.string=function(bG,bH,bI){return bH==null?bI!=null&&bI.$==1?bG.slice(0,bI.$0+1):"":bI==null?bG.slice(bH.$0):bG.slice(bH.$0,bI.$0+1);};_0.TextHoleRE=function(){_8.$cctor();return _8.TextHoleRE;};_0.LoadedTemplates=function(){_8.$cctor();return _8.LoadedTemplates;};_0.LoadedTemplateFile=function(bG){var bH,bI,bJ;bH=(bI=null,[_0.LoadedTemplates().TryGetValue(bG,{get:function(){return bI;},set:function(bK){bI=bK;}}),bI]);return bH[0]?bH[1]:(bJ=new G.New$5(),(_0.LoadedTemplates().set_Item(bG,bJ),bJ));};_0.CreateRunState=function(bG,bH){return bb.New(bc.get_Empty(),_0.CreateElemNode(bG,C.EmptyAttr(),bH));};_0.PerformAnimatedUpdate=function(bG,bH){var bI;return bd.get_UseAnimations()?(bI=null,bf.Delay(function(){var bJ,bK,bL;bJ=bc.FindAll(bH);bK=_0.ComputeChangeAnim(bG,bJ);bL=_0.ComputeEnterAnim(bG,bJ);return bf.Bind(bd.Play(bd.Append(bK,_0.ComputeExitAnim(bG,bJ))),function(){return bf.Bind(_0.SyncElemNodesNextFrame(bG),function(){return bf.Bind(bd.Play(bL),function(){bG.PreviousNodes=bJ;return bf.Return(null);});});});})):_0.SyncElemNodesNextFrame(bG);};_0.LinkElement=function(bG,bH){_0.InsertDoc(bG,bH,null);};_0.InsertBeforeDelim=function(bG,bH){var bI,bJ;bI=bG.parentNode;bJ=a.document.createTextNode("");bI.insertBefore(bJ,bG);_0.LinkPrevElement(bG,bH);return bJ;};_0.CreateElemNode=function(bG,bH,bI){var bJ;_0.LinkElement(bG,bI);bJ=C.Insert(bG,bH);return X.New(bJ,bI,null,bG,L.Int(),bC.GetOptional(bJ.OnAfterRender));};_0.ComputeChangeAnim=function(bG,bH){var bI;function bJ(bK){return C.HasChangeAnim(bK.Attr);}bI=function(bK){return bc.Filter(bJ,bK);};return bd.Concat(p.map(function(bK){return C.GetChangeAnim(bK.Attr);},bc.ToArray(bc.Intersect(bI(bG.PreviousNodes),bI(bH)))));};_0.ComputeEnterAnim=function(bG,bH){return bd.Concat(p.map(function(bI){return C.GetEnterAnim(bI.Attr);},bc.ToArray(bc.Except(bG.PreviousNodes,bc.Filter(function(bI){return C.HasEnterAnim(bI.Attr);},bH)))));};_0.ComputeExitAnim=function(bG,bH){return bd.Concat(p.map(function(bI){return C.GetExitAnim(bI.Attr);},bc.ToArray(bc.Except(bH,bc.Filter(function(bI){return C.HasExitAnim(bI.Attr);},bG.PreviousNodes)))));};_0.SyncElemNodesNextFrame=function(bG){function bH(bI){a.requestAnimationFrame(function(){_0.SyncElemNode(bG.Top);bI();});}return bi.BatchUpdatesEnabled()?bf.FromContinuations(function(bI,bJ,bK){return bH.apply(null,[bI,bJ,bK]);}):(_0.SyncElemNode(bG.Top),bf.Return(null));};_0.CreateTextNode=function(){return{Text:D.CreateText(""),Dirty:false,Value:""};};_0.UpdateTextNode=function(bG,bH){bG.Value=bH;bG.Dirty=true;};_0.InsertDoc=function(bG,bH,bI){var bJ;return bH!=null&&bH.$==1?_0.InsertNode(bG,bH.$0.El,bI):bH!=null&&bH.$==2?(bJ=bH.$0,(bJ.Dirty=false,_0.InsertDoc(bG,bJ.Current,bI))):bH==null?bI:bH!=null&&bH.$==4?_0.InsertNode(bG,bH.$0.Text,bI):bH!=null&&bH.$==5?_0.InsertNode(bG,bH.$0,bI):bH!=null&&bH.$==6?p.foldBack(function(bK,bL){return bK.constructor===R?_0.InsertDoc(bG,bK,bL):_0.InsertNode(bG,bK,bL);},bH.$0.Els,bI):_0.InsertDoc(bG,bH.$0,_0.InsertDoc(bG,bH.$1,bI));};_0.LinkPrevElement=function(bG,bH){_0.InsertDoc(bG.parentNode,bH,bG);};_0.SyncElemNode=function(bG){_0.SyncElement(bG);_0.Sync(bG.Children);_0.AfterRender(bG);};_0.InsertNode=function(bG,bH,bI){D.InsertAt(bG,bI,bH);return bH;};_0.SyncElement=function(bG){function bH(bI){function bJ(bK){var bL,bM;return bK!=null&&bK.$==0?bJ(bK.$0)||bJ(bK.$1):bK!=null&&bK.$==2?(bL=bK.$0,bL.Dirty||bJ(bL.Current)):bK!=null&&bK.$==6&&(bM=bK.$0,bM.Dirty||p.exists(bH,bM.Holes));}return bJ(bI.Children);}C.Sync(bG.El,bG.Attr);bH(bG)?_0.DoSyncElement(bG):void 0;};_0.Sync=function(bG){var bH,bI;if(bG!=null&&bG.$==1)_0.SyncElemNode(bG.$0);else if(bG!=null&&bG.$==2)_0.Sync(bG.$0.Current);else if(bG==null);else if(bG!=null&&bG.$==5);else if(bG!=null&&bG.$==4){bH=bG.$0;bH.Dirty?(bH.Text.nodeValue=bH.Value,bH.Dirty=false):void 0;}else if(bG!=null&&bG.$==6){bI=bG.$0;p.iter(function(bJ){_0.SyncElemNode(bJ);},bI.Holes);p.iter(function(bJ){C.Sync(bJ[0],bJ[1]);},bI.Attrs);_0.AfterRender(bI);}else{_0.Sync(bG.$0);_0.Sync(bG.$1);}};_0.AfterRender=function(bG){var bH;bH=bC.GetOptional(bG.Render);bH!=null&&bH.$==1?(bH.$0(bG.El),bC.SetOptional(bG,"Render",null)):void 0;};_0.DoSyncElement=function(bG){var bH,bI,bJ;function bK(bL,bM){var bN,bO;return bL!=null&&bL.$==1?bL.$0.El:bL!=null&&bL.$==2?(bN=bL.$0,bN.Dirty?(bN.Dirty=false,_0.InsertDoc(bH,bN.Current,bM)):bK(bN.Current,bM)):bL==null?bM:bL!=null&&bL.$==4?bL.$0.Text:bL!=null&&bL.$==5?bL.$0:bL!=null&&bL.$==6?(bO=bL.$0,(bO.Dirty?bO.Dirty=false:void 0,p.foldBack(function(bP,bQ){return bP.constructor===R?bK(bP,bQ):bP;},bO.Els,bM))):bK(bL.$0,bK(bL.$1,bM));}bH=bG.El;bx.Iter((bI=bG.El,function(bL){D.RemoveNode(bI,bL);}),bx.Except(bx.DocChildren(bG),bx.Children(bG.El,bC.GetOptional(bG.Delimiters))));bK(bG.Children,(bJ=bC.GetOptional(bG.Delimiters),bJ!=null&&bJ.$==1?bJ.$0[1]:null));};_1=e.Elt=bC.Class({},O,_1);_1.TreeNode=function(bG,bH){var bI,bJ;function bK(bL){return bL[1];}bI=$.Create(bH);return new _1.New$1({$:6,$0:bG},o.Map2Unit((bJ=p.map(function(bL){return C.Updates(bK(bL));},bG.Attrs),_.TreeReduce(o.Const(),o.Map2Unit,bJ)),bI.v),p.get(bG.Els,0),bI);};_1.New$1=bC.Ctor(function(bG,bH,bI,bJ){O.New.call(this,bG,bH);this.docNode$1=bG;this.updates$1=bH;this.elt=bI;this.rvUpdates=bJ;},_1);_2.StartProcessor=function(bG){var bH;function bI(){var bJ;bJ=null;return bf.Delay(function(){return bf.Bind(bG,function(){var bK;bK=bH[0];return bK===1?(bH[0]=0,bf.Zero()):bK===2?(bH[0]=1,bI()):bf.Zero();});});}bH=[0];return function(){var bJ;bJ=bH[0];bJ===0?(bH[0]=1,bf.Start(bI(),null)):bJ===1?bH[0]=2:void 0;};};_3.concat=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push.apply(bH,bG[bJ]);return bH;};_4.Clear=function(bG){bG.splice(0,p.length(bG));};_7.New=function(bG,bH,bI,bJ){var bK;bK={DynElem:bG,DynFlags:bH,DynNodes:bI};bC.SetOptional(bK,"OnAfterRender",bJ);return bK;};_8.$cctor=function(){_8.$cctor=a.ignore;_8.BatchUpdatesEnabled=true;_8.LoadedTemplates=new G.New$5();_8.LocalTemplatesLoaded=false;_8.TextHoleRE="\\${([^}]+)}";};_9=e.CheckedInput=bC.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,_9);_.TreeReduce=function(bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?p.get(bI,bL):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=p.length(bI);return bK(0,bJ);};_.MapTreeReduce=function(bG,bH,bI,bJ){var bK;function bL(bM,bN){var bO,bP;return bN<=0?bH:bN===1&&(bM>=0&&bM<bK)?bG(p.get(bJ,bM)):(bP=bN/2>>0,bI(bL(bM,bP),bL(bM+bP,bN-bP)));}bK=p.length(bJ);return bL(0,bK);};_.ofSeqNonCopying=function(bG){var bH,bI;if(bG instanceof a.Array)return bG;else if(bG instanceof m)return p.ofList(bG);else if(bG===null)return[];else{bH=[];bI=Q.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if("Dispose"in bI)bI.Dispose();}}};$=e.Updates=bC.Class({},null,$);$.Create=function(bG){var bH;bH=null;bH=$.New(bG,null,function(){var bI;bI=bH.s;return bI===null?(bI=A.Copy(bH.c()),bH.s=bI,A.WhenObsoleteRun(bI,function(){bH.s=null;}),bI):bI;});return bH;};$.New=function(bG,bH,bI){return new $({c:bG,s:bH,v:bI});};bb.New=function(bG,bH){return{PreviousNodes:bG,Top:bH};};bc.get_Empty=function(){return{$:0,$0:new H.New$3()};};bc.FindAll=function(bG){var bH;function bI(bK){if(bK!=null&&bK.$==0){bI(bK.$0);bI(bK.$1);}else if(bK!=null&&bK.$==1)bJ(bK.$0);else if(bK!=null&&bK.$==2)bI(bK.$0.Current);else if(bK!=null&&bK.$==6)p.iter(bJ,bK.$0.Holes);}function bJ(bK){bH.push(bK);bI(bK.Children);}bH=[];bI(bG);return{$:0,$0:new H.New$2(bH)};};bc.Filter=function(bG,bH){return{$:0,$0:bp.Filter(bG,bH.$0)};};bc.Intersect=function(bG,bH){return{$:0,$0:bp.Intersect(bG.$0,bH.$0)};};bc.ToArray=function(bG){return bp.ToArray(bG.$0);};bc.Except=function(bG,bH){return{$:0,$0:bp.Except(bG.$0,bH.$0)};};bd.get_UseAnimations=function(){return bg.UseAnimations();};bd.Play=function(bG){var bH;bH=null;return bf.Delay(function(){return bf.Bind(bd.Run(a.ignore,bg.Actions(bG)),function(){bg.Finalize(bG);return bf.Return(null);});});};bd.Append=function(bG,bH){return{$:0,$0:bh.Append(bG.$0,bH.$0)};};bd.Concat=function(bG){return{$:0,$0:bh.Concat(J.map(bg.List,bG))};};bd.Run=function(bG,bH){var bI;function bJ(bK){function bL(bM,bN){var bO;bO=bN-bM;bH.Compute(bO);bG();return bO<=bI?void a.requestAnimationFrame(function(bP){bL(bM,bP);}):bK();}a.requestAnimationFrame(function(bM){bL(bM,bM);});}bI=bH.Duration;return bI===0?bf.Zero():bf.FromContinuations(function(bK,bL,bM){return bJ.apply(null,[bK,bL,bM]);});};bd.get_Empty=function(){return{$:0,$0:bh.Empty()};};be.isBlank=function(bG){return E.forall(bj.IsWhiteSpace,bG);};bf.Delay=function(bG){return function(bH){try{(bG(null))(bH);}catch(bI){bH.k({$:1,$0:bI});}};};bf.Bind=function(bG,bH){return bf.checkCancel(function(bI){bG(bl.New(function(bJ){var bK;if(bJ.$==0){bK=bJ.$0;bf.scheduler().Fork(function(){try{(bH(bK))(bI);}catch(bL){bI.k({$:1,$0:bL});}});}else bf.scheduler().Fork(function(){bI.k(bJ);});},bI.ct));});};bf.Zero=function(){bm.$cctor();return bm.Zero;};bf.Start=function(bG,bH){var bI,bJ;bI=(bJ=(bf.defCTS())[0],bH==null?bJ:bH.$0);bf.scheduler().Fork(function(){if(!bI.c)bG(bl.New(function(bK){if(bK.$==1)bf.UncaughtAsyncError(bK.$0);},bI));});};bf.Return=function(bG){return function(bH){bH.k({$:0,$0:bG});};};bf.checkCancel=function(bG){return function(bH){if(bH.ct.c)bf.cancel(bH);else bG(bH);};};bf.defCTS=function(){bm.$cctor();return bm.defCTS;};bf.UncaughtAsyncError=function(bG){bD.log("WebSharper: Uncaught asynchronous exception",bG);};bf.FromContinuations=function(bG){return function(bH){var bI;function bJ(bK){if(bI[0])g.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bI[0]=true;bf.scheduler().Fork(bK);}}bI=[false];bG(function(bK){bJ(function(){bH.k({$:0,$0:bK});});},function(bK){bJ(function(){bH.k({$:1,$0:bK});});},function(bK){bJ(function(){bH.k({$:2,$0:bK});});});};};bf.cancel=function(bG){bG.k({$:2,$0:new bu.New(bG.ct)});};bf.scheduler=function(){bm.$cctor();return bm.scheduler;};bg.UseAnimations=function(){bo.$cctor();return bo.UseAnimations;};bg.Actions=function(bG){return bg.ConcatActions(p.choose(function(bH){return bH.$==1?{$:1,$0:bH.$0}:null;},bh.ToArray(bG.$0)));};bg.Finalize=function(bG){p.iter(function(bH){if(bH.$==0)bH.$0();},bh.ToArray(bG.$0));};bg.List=function(bG){return bG.$0;};bg.ConcatActions=function(bG){var bH,bI,bJ,bK;bH=_.ofSeqNonCopying(bG);bI=p.length(bH);return bI===0?bg.Const():bI===1?p.get(bH,0):(bJ=J.max(J.map(function(bL){return bL.Duration;},bH)),(bK=p.map(function(bL){return bg.Prolong(bJ,bL);},bH),bg.Def(bJ,function(bL){p.iter(function(bM){bM.Compute(bL);},bK);})));};bg.Const=function(bG){return bg.Def(0,function(){return bG;});};bg.Prolong=function(bG,bH){var bI,bJ,bK;bI=bH.Compute;bJ=bH.Duration;bK=bw.Create(function(){return bH.Compute(bH.Duration);});return{Compute:function(bL){return bL>=bJ?bK.f():bI(bL);},Duration:bG};};bg.Def=function(bG,bH){return{Compute:bH,Duration:bG};};bh.Append=function(bG,bH){return bG.$==0?bH:bH.$==0?bG:{$:2,$0:bG,$1:bH};};bh.Concat=function(bG){var bH;bH=_.ofSeqNonCopying(bG);return _.TreeReduce(bh.Empty(),bh.Append,bH);};bh.ToArray=function(bG){var bH;function bI(bJ){if(bJ.$==1)bH.push(bJ.$0);else if(bJ.$==2){bI(bJ.$0);bI(bJ.$1);}else if(bJ.$==3)p.iter(function(bK){bH.push(bK);},bJ.$0);}bH=[];bI(bG);return bH.slice(0);};bh.Empty=function(){bv.$cctor();return bv.Empty;};bi.BatchUpdatesEnabled=function(){_8.$cctor();return _8.BatchUpdatesEnabled;};bj.IsWhiteSpace=function(bG){return bG.match(new a.RegExp("\\s"))!==null;};T.TryParse=function(bG,bH,bI,bJ){var bK,bL;bK=+bG;bL=bK===bK-bK%1&&bK>=bH&&bK<=bI;bL?bJ.set(bK):void 0;return bL;};bk.$cctor=function(){bk.$cctor=a.ignore;bk.EmptyAttr=null;};bl.New=function(bG,bH){return{k:bG,ct:bH};};bm.$cctor=function(){bm.$cctor=a.ignore;bm.noneCT=bn.New(false,[]);bm.scheduler=new br.New();bm.defCTS=[new bs.New()];bm.Zero=bf.Return();bm.GetCT=function(bG){bG.k({$:0,$0:bG.ct});};};bn.New=function(bG,bH){return{c:bG,r:bH};};bo.$cctor=function(){bo.$cctor=a.ignore;bo.CubicInOut=bt.Custom(function(bG){var bH;bH=bG*bG;return 3*bH-2*(bH*bG);});bo.UseAnimations=true;};bp.Filter=function(bG,bH){return new H.New$2(p.filter(bG,bp.ToArray(bH)));};bp.Intersect=function(bG,bH){var bI;bI=new H.New$2(bp.ToArray(bG));bI.IntersectWith(bp.ToArray(bH));return bI;};bp.ToArray=function(bG){var bH;bH=p.create(bG.get_Count(),void 0);bG.CopyTo(bH);return bH;};bp.Except=function(bG,bH){var bI;bI=new H.New$2(bp.ToArray(bH));bI.ExceptWith(bp.ToArray(bG));return bI;};l.head=function(bG){return bG.$==1?bG.$0:l.listEmpty();};l.tail=function(bG){return bG.$==1?bG.$1:l.listEmpty();};l.listEmpty=function(){return g.FailWith("The input list was empty.");};bq.$cctor=function(){bq.$cctor=a.ignore;bq.Doc=a.document;};br=bf.Scheduler=bC.Class({Fork:function(bG){var bH;bH=this;this.robin.push(bG);this.idle?(this.idle=false,a.setTimeout(function(){bH.tick();},0)):void 0;},tick:function(){var bG,bH,bI;bH=this;bI=bF.now();bG=true;while(bG)if(this.robin.length===0){this.idle=true;bG=false;}else{(this.robin.shift())();bF.now()-bI>40?(a.setTimeout(function(){bH.tick();},0),bG=false):void 0;}}},k,br);br.New=bC.Ctor(function(){this.idle=true;this.robin=[];},br);bs=d.CancellationTokenSource=bC.Class({},k,bs);bs.New=bC.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bs);bt=e.Easing=bC.Class({},k,bt);bt.Custom=function(bG){return new bt.New(bG);};bt.New=bC.Ctor(function(bG){this.transformTime=bG;},bt);bu=d.OperationCanceledException=bC.Class({},null,bu);bu.New=bC.Ctor(function(bG){bu.New$1.call(this,"The operation was canceled.",null,bG);},bu);bu.New$1=bC.Ctor(function(bG,bH,bI){this.message=bG;this.inner=bH;this.ct=bI;},bu);bv.$cctor=function(){bv.$cctor=a.ignore;bv.Empty={$:0};};bw.Create=function(bG){return bz.New(false,bG,bw.forceLazy);};bw.forceLazy=function(){var bG;bG=this.v();this.c=true;this.v=bG;this.f=bw.cachedLazy;return bG;};bw.cachedLazy=function(){return this.v;};bx.DocChildren=function(bG){var bH;function bI(bJ){if(bJ!=null&&bJ.$==2)bI(bJ.$0.Current);else if(bJ!=null&&bJ.$==1)bH.push(bJ.$0.El);else if(bJ==null);else if(bJ!=null&&bJ.$==5)bH.push(bJ.$0);else if(bJ!=null&&bJ.$==4)bH.push(bJ.$0.Text);else if(bJ!=null&&bJ.$==6)p.iter(function(bK){if(bK.constructor===R)bI(bK);else bH.push(bK);},bJ.$0.Els);else{bI(bJ.$0);bI(bJ.$1);}}bH=[];bI(bG.Children);return{$:0,$0:_.ofSeqNonCopying(bH)};};bx.Children=function(bG,bH){var bI,bJ,bK;if(bH!=null&&bH.$==1){bK=[];bI=bH.$0[0].nextSibling;while(bI!==bH.$0[1]){bK.push(bI);bI=bI.nextSibling;}return{$:0,$0:bK};}else return{$:0,$0:p.init(bG.childNodes.length,(bJ=bG.childNodes,function(bL){return bJ[bL];}))};};bx.Except=function(bG,bH){var bI;bI=bG.$0;return{$:0,$0:p.filter(function(bJ){return p.forall(function(bK){return!(bJ===bK);},bI);},bH.$0)};};bx.Iter=function(bG,bH){p.iter(bG,bH.$0);};bz.New=function(bG,bH,bI){return{c:bG,v:bH,f:bI};};bC.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
